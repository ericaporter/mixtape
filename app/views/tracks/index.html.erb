<p id="notice"><%= notice %></p>

<h1>Listing Tracks</h1>

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Tags</th>
      <th>User</th>
      <th>Tag</th>
      <th>Track image</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @tracks.each do |track| %>
      <!-- table row with card-style track details -->
      <tr>
        <% @track = track %>
        <%= render 'track_details' %>
      </tr>
      <!-- end card-style -->

      <!-- table row with table-style details -->
      <tr>
        <td><%= track.title %></td>
        <td><p><%= track.tag_list %></p></td>
        <td><%= track.user_id %></td>
        <td><%= track.tag_id %></td>
        <td><%= image_tag track.track_image.url %></td>
        <td><%= track.audio_track %></td>
        <td><%= link_to 'Show', track %></td>
        
        <% if current_user && current_user.id == track.user_id %>
          <td><%= link_to 'Edit', edit_track_path(track) %></td>
          <td><%= link_to 'Destroy', track, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
      <!-- end table-style -->
      
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Track', new_track_path %>
